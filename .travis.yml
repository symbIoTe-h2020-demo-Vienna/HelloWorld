language: java

env:
  global:
    secure: "A9iIViUN2LMiHUOL6bQWW2HqU1goof4B5U3CeN9U9WTeIgy2nPj6QLQGTSdboLXHBRsSp/OhLyh2ZRICYn0JxLZds0cCezTx/mGiYWSxBfT9QN/ATDsOx9RleXn3+qzeJwF0VLZHRvbdMLjS3bML0zblBatVZ9WhzGHoVUreRAUMWbT6ULj+8xcitiCIeAoi8AKZNjRuwQ8MD5xLYVP8GgRscynP7ibWhY18WFQIiKesPEpDaPchFpMYGuWVz1mGMaxPNd0RH8zP7PJ+AUgkKLl10++iqbgFJbzmm4dPxKG0lawkN9hP+KvD9ItsXJ3Bv6Gm9MMz/ACA1+RXnYfYgrJSa/ydsAX0bx8t3BGXYcyZzQi6RQZvyg1IkEnR5N/7VHxauftgHYwVb4pZ0LDGzyHkZQ9Shh/7Ht6vLzNeqB8sYZilQO6BkY1hxZWyGg3zVWIsvO9PsB8Ob5B+IPAq7CH1NI7l2Ly/5bPlShHzBEPxQNCpZ0Fy0HVD6i9Rze85I1zRtOM2kFCWaA9EDddL7YWFsvAAMCb+f4vkbC856Vi+pqlqiZMEznWTDHBTYwoqcmMLCTQptVNDwzfKzemO4Ljq+DY9Q9wnj5Oc+y7g1Jkbvs9r5+CdaDdeRdit1s+bOVTNWzIZ+GGfMNGmEG7sQ+QlPxRkqvLT2gwJ1ZwdYSA="

jdk:
- oraclejdk8

branches:
  only:
  - staging

before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/

cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"

after_success:
- chmod a+x merge_script.sh
- BRANCHES_TO_MERGE_REGEX='staging' BRANCH_TO_MERGE_INTO=develop GITHUB_REPO=symbiote-h2020/HelloWorld
  ./merge_script.sh
- bash <(curl -s https://codecov.io/bash)
